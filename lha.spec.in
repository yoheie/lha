%define setupdir @PACKAGE@-@VERSION@
%define rpmver %(echo @VERSION@ | sed 's/-/./g')

Name: @PACKAGE@
Version: %{rpmver}
Release: 1%{?dist}
Source: @PACKAGE@-@VERSION@.tar.gz

Summary: LHa file archiving utility with compress
Summary(ja): LHa 高圧縮アーカイバ
License: distributable
Group: Applications/File
Url: https://github.com/jca02266/lha
# Url: http://lha.osdn.jp/
# Url: http://www2m.biglobe.ne.jp/~dolphin/lha/lha.htm
Packager: Yohei Endo <yoheie@gmail.com>

Buildroot: %{_tmppath}/%{name}-%{version}-root
Prefix: %{_prefix}

%description
LHa is a file archiving utility with compress.
This is autotoolized and bug-fixed version of original 1.14i.
Original 1.14i can be found at:
 http://www2m.biglobe.ne.jp/~dolphin/lha/prog/lha-114i.tar.gz

%description -l ja
LHa は効率の高い圧縮機能を持つファイルアーカイバです。
このバージョンはオリジナルの 1.14i に autotool 対応および
いくつかの bug fix をしたものです。
オリジナルの 1.14i は以下の URI から入手可能です。
 http://www2m.biglobe.ne.jp/~dolphin/lha/prog/lha-114i.tar.gz

%prep
%setup -q -n %{setupdir}

%build
./configure --prefix=%{_prefix} --mandir=%{_mandir} --enable-multibyte-filename=utf8
make

%install
rm -rf ${RPM_BUILD_ROOT}
make DESTDIR=${RPM_BUILD_ROOT} install

%clean
rm -rf ${RPM_BUILD_ROOT}

%files
%defattr(-,root,root)
%doc README.md README.jp.md header.doc.md header.doc.jp Hacking_of_LHa olddoc/
%{_prefix}/bin/lha
%{_mandir}/man1/lha.1*

%changelog
* Thu Jun 16 2022 Yohei Endo <yoheie@gmail.com>
- Fix URL and Description

* Sat Jan 09 2021 Yohei Endo <yoheie@gmail.com>
- Add README.md and header.doc.md to %%doc

* Mon Oct 28 2019 Yohei Endo <yoheie@gmail.com>
- ChangeLog is moved into olddoc/

* Wed Jul 12 2017 Yohei Endo <yoheie@gmail.com>
- Add "--enable-multibyte-filename=utf8" configure option

* Wed Apr 12 2017 Yohei Endo <yoheie@gmail.com>
- Add %%{?dist} to Release

* Mon Feb 20 2017 Yohei Endo <yoheie@gmail.com>
- Use DESTDIR on make install

* Wed Jan 20 2016 Yohei Endo <yoheie@gmail.com>
- Autotoolized initial release
